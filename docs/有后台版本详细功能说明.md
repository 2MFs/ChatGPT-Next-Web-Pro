### 特性（有后台版本）：
- **一**. **包含无后台版本的完整功能**
- **二**. **账号注册与登录**，任选一种即可，支持禁用注册和微信登录：
    - 1.**支持手机号注册登录**。
    - 2.**支持邮箱注册登录**，支持设置邮箱后缀白名单，在annyun-admin的环境变量里增加参数 MAIL_WHITE_LIST。
    - 3.**支持微信公众号扫码关注授权登录**。
- **三**. **AI管理**：
    - 1.**AI平台管理**，
        - 1.1 支持添加不同平台，设置不同的接口地址。
    - 2.**模型管理**，
        - 2.1 支持添加不同平台模型，注意：gpt-4-gizmo-*，别删别改！！！这是gpts应用系列模型，判断套餐内容的时候是用通配符匹配的，也就是所有gpts模型都是判断这个。
        - 2.2 支持设置默认新建会话的默认模型和总结标题的模型。
        - 2.3 支持设置输入输出倍率，默认1，用户输入和模型输出的token和字符数量会乘以这个倍率，作为最终的一个token和字符数量。
    - 3.**ApiKey管理**，
        - 3.1 可以为key单独设置接口地址，如果设置了，则会以这边设置的为准，没设置则以平台管理那边设置的为准。
        - 3.2 可以添加适用的模型，没设置就是该平台下的通用key，如果设置了，用户请求时，会优先使用适用模型的key。
- **四**. **套餐管理**，先设置套餐资源，再设置套餐信息，用户端看到的是套餐信息，一个套餐信息可以包含多个套餐资源，每个套餐资源可以设置不同的模型、不同的计费方式：
    - 1.**套餐资源**：
        - 1.1 套餐内包含的基础资源，可以添加可用模型，设置计费模式、数量限制等。
        - 1.2 数量限制如果设成-1则表示无限制。注意：套餐资源的数量限制，如果设成次数，则只统计用户发送的次数，如果是token或字数，则是双向统计。
        - 1.3 修改套餐资源保存时，会提示是否同步给已经存在的用户套餐资源，只会同步新增的资源，用户已经使用的量和有效期不会变，已过期或耗尽的套餐不会更新。比如套餐资源里增加了一个模型，如果确认同步给用户，则用户套餐资源里也会多出这个模型，但使用了多少token或次数保持不变。
    - 2.**套餐信息**：
        - 2.1 可以添加多个套餐资源，设置计费周期、价格、数量倍数，以及限速设置，可以设置多少小时内，只能请求多少次。
        - 2.2 用户购买该套餐后，拥有的数量是：套餐资源的数量限制 * 数量倍数，比如 套餐资源里设置token数量限制是1000，套餐信息这个设置token倍数是10，则用户得到 1000 * 10 = 10000 token。
        - 2.3 如果套餐的计费模式是：用完即止，则用户购买的该套餐，默认有效期是1年。
        - 2.4 可以设置是否作为用户注册就赠送的套餐。如果把一个套餐设成注册赠送，则所有新注册的用户，会自动获得这个套餐，并在登录后自动生效。
        - 2.5 修改套餐信息保存时，会提示是否同步给已经存在的用户套餐，会同步套餐的所有资源给用户，但用户已经使用的量和有效期不会变，已过期或耗尽的套餐不会更新。
    - 3.**套餐兑换码**：
        - 3.1 可以为套餐生成兑换码，当没使用微信支付时，可以让用户通过其它方式把钱付给你，你把兑换码给用户，用户在聊天套餐列表那边进行兑换。
- **五**. **订单管理**：
    - 1.**订单信息**：包含扫码支付和兑换码生成的订单。
- **六**. **会员管理**：
    - 1.**会员信息**：
        - 1.1 支持手动新增会员，并添加套餐，添加的套餐，会在会员登录后自动生效。
        - 1.2 支持批量生成会员账号密码和会员套餐，会自动导出excel，生成的会员套餐，会在会员首次登录后自动生效。
        - 1.3 支持批量给用户授权套餐，授权的套餐会在下一次登录生效。
    - 2.**会员套餐**：
        - 2.1 用户的套餐信息，支持编辑用户套餐，可以修改套餐，生效失效时间，以及重置套餐内容。
        - 2.2 用户购买同一个套餐，有效期是累加的，比如套餐A，有效期一个月，用户已经购买了一个套餐A，过期时间是5月30号，则他在5月30号前再次购买套餐A，则他新套餐的有效期是到6月30号。
        - 2.3 用户购买套餐，是购买了那一刻的套餐镜像，后续对套餐信息或者套餐资源做任何修改，都不会同步给已经购买该套餐的用户，除非通过编辑用户套餐进行重置套餐内容。
        - 2.4 增加定时任务每天定时扫描用户套餐状态，过期的套餐会标注过期。
- **七**. **会话管理**，会把用户聊天的会话主题和消息保存到后台，用户登录时会拉取最新的聊天记录，也就是用户可以任意浏览器登录，消息都可以同步：
    - 1.**会话主题**：用户聊天的主题。
    - 2.**会话消息**：用户聊天每个主题下的消息记录，支持导出消息记录。
- **八**. **支付**：
    - 1.**微信支付**：需要申请微信商户，开通微信支付。因为需要关联appId，所以还需要申请小程序或者公众号。
    - 2.**易支付**：支持大部分易支付平台，或自建平台。
- **九**. **对接fastgpt知识库**：
    - 1.先在平台管理里建一个平台，平台名称随意，接口地址那边填fastgpt的根地址。
    - 2.然后在模型管理里建模型，模型名称对应fastgpt里建的知识库应用名称。
    - 3.接着在apikey新增fastgpt对应的知识库的apikey，并选择适用模型为第2步建的模型。
    - 4.最后新增套餐资源，并选择前面建的模型，新增套餐信息，选择建好的套餐资源，这样有这套餐的用户就可以与知识库对话了。
- **九**. **文件解析**：
    - 1.后台会把用户上传的文件解析出内容，再跟随用户输入的内容一起发给模型分析，几乎支持所有模型。
    - 2.支持的文件格式：pdf、word、ppt、excel、image(ocr)、audio、html、txt、zip
    - 3.内容大小受模型能力限制，比如模型支持32K上下文，那文件内容（非文件大小）也不能超过32K。

### SpringCloud微服务版
本后端项目基于SpringCloud开发，天生就是微服务，但是微服务需要消耗更多的服务器资源，部署和配置也更加复杂，如有需要，可以联系咨询。